# RPG-GAME
-- STILL ALPHA MOD --



# 1. 下載與安裝教學

## 必須安裝 AI chat
本遊戲必須安裝並啟動 Ollama（AI chat）與 llama3 模型，否則程式將無法正常運作。請務必依照下方教學完成安裝！

### 執行方式
1. 安裝 Python 3.x
2. 依下方步驟安裝 Ollama 與 llama3
3. 進入 `src` 資料夾
4. 執行：
   ```powershell
   python main.py
   ```
5. 按照指示輸入角色名稱、選擇模式、體驗專屬故事與 AI 劇情互動

> 注意：如遇 Ollama 啟動異常或 AI 無法回應，建議重啟電腦後再試一次。

### AI 互動劇情安裝教學（Ollama + llama3）
1. 前往 https://ollama.com/download 下載對應作業系統的安裝檔。
2. Windows 用戶請直接執行安裝程式，依指示完成安裝。
3. Mac/Linux 用戶請依官網指示安裝。
4. 安裝完成後，Ollama 會自動於背景啟動。
5. 若未自動啟動，可手動執行：
   - Windows：在開始選單搜尋「Ollama」並啟動
   - Mac/Linux：於終端機輸入 `ollama serve`
6. 打開命令提示字元（cmd）或 PowerShell，輸入：
   ```shell
   ollama pull llama3
   ```
7. 等待模型下載完成（首次下載需數分鐘，視網路速度而定）。
8. 測試 Ollama 是否正常：
   ```shell
   ollama run llama3
   ```
   輸入任意問題，若能獲得 AI 回應即代表安裝成功。
   按 Ctrl+C 可結束測試。
9. 啟動 RPG 遊戲：依前述「執行方式」步驟執行 `python main.py`。
10. 若 Ollama 與 llama3 已啟動，遊戲互動劇情將自動由 AI 生成。
11. 若未啟動 Ollama，則自動使用本地隨機事件。
12. 常見問題：
    - 若出現「無法連線到 Ollama」或「AI 無回應」：請確認 Ollama 已啟動，且 llama3 已下載完成。可重啟電腦或重新啟動 Ollama。
    - 若只想體驗本地隨機事件，無需安裝 Ollama。

---

# 2. 遊戲玩法教學

## 遊戲流程
- 啟動遊戲後，輸入角色名稱（可自訂或隨機生成）。
- 選擇角色模式：「弱角色挑戰」或「隨機角色」。
- 角色有六維能力、金錢、背包、出生地等屬性。
- 選擇出生地，部分角色有特殊出生地限制。
- 進入主流程後，每回合可選擇：
  - 探索（發現新地點、觸發事件、AI 劇情分支）
  - 交涉（與勢力互動、觸發事件）
  - 背包/狀態（查看能力、物品、地圖）
  - 離開（結束遊戲）
- 每次探索會自動記錄已訪地點，並根據世界狀態觸發隨機事件。
- 劇情分支與選項由 AI 生成，選擇不同分支會影響世界狀態與結局。

## 角色與能力
- 內建多種角色模板（神選者、領主、貴族、農奴、吟遊詩人、學者、騎士、祭司、商人、盜賊、獵人、煉金術師、工匠、冒險者、流浪漢、魔法師、窮鬼等）。
- 每個角色有基礎 HP（如 85/85）、等級、六維能力（智慧、力量、敏捷、耐力、幸運、魔力）、初始金錢與物品。
- 支援「弱角色挑戰」與「隨機角色」模式。

## 世界與事件
- 世界由狮鹫帝國、龍塔國、獸人群落、精靈森林、腐化之地等勢力組成。
- 每個地區有獨特文化、種族、事件與主線/支線劇情。
- 事件系統支援主線、支線、隨機事件，並根據玩家行動與世界狀態動態觸發。
- 事件如：北境保衛戰、龍族盟約、龍族戰爭、精靈詛咒、獸人叛亂、怪物潮等。

## AI 互動劇情
- 劇情分支、角色互動、事件描述皆由 AI（llama3）自動生成，內容豐富多變。
- 玩家每個選擇都會影響世界狀態、聲望、劇情走向與結局。

## 背包與地圖
- 背包顯示當前持有物品，地圖顯示已探索與未知地點。
- 狀態頁可查看六維能力、生命值（如 85/85）、金錢、物品、地圖。

---

# 3. 系統與模組總結

## 主要模組與功能

- `main.py`：主流程與遊戲入口，負責角色選擇、主迴圈、行動選單、背包/地圖顯示。
- `player.py`：角色模板、能力、金錢、背包、角色創建與顯示。
- `story.py`：出生地選擇、勢力與地圖資料、出生地分配邏輯。
- `world_state.py`：世界狀態管理（大事件、聲望、主線、結局、旗標等）。
- `events.py`：事件系統，定義主線/支線/隨機事件、觸發條件與效果。
- `story_ai.py`：AI 互動劇情、分支選項、角色互動、AI prompt 設計。
- `world_data.py`：世界觀、神選者體系、領主系統、紀元、背景資料。
- `character.py`：特殊角色（如緋洛米奈、羅莎莉亞）詳細設定與面板。

## 進階擴充
- 所有模組皆可自訂、擴充角色、事件、劇情、世界觀。
- 支援本地隨機事件與 AI 生成混用。
- 可根據需求調整世界規則、角色能力、事件分支。

---

# 4. 系統總結

本遊戲為高自由度、AI 驅動的中世紀奇幻 RPG，支援多線分支劇情、動態事件、聲望與關係系統、世界狀態變化、多種結局。所有內容皆可自訂擴充，適合喜愛劇情、策略、角色扮演的玩家。

## 多線分支劇情
- 玩家每個選擇都會開啟不同劇情線。
  - 例：協助北境大公防禦腐化之地，進入「北境保衛戰」主線，影響北方勢力與腐化女神發展。
  - 例：與龍塔國結盟或挑釁，開啟「龍族盟約」或「龍族戰爭」分支。
  - 例：帝國內部發展勢力，甚至謀求篡位，開啟「帝國內戰」劇情。

## 動態事件生成
- 每個地區根據世界狀態、玩家行動隨機生成事件：
  - 腐化之地爆發怪物潮，影響北境安全。
  - 精靈森林出現神秘詛咒，需要玩家或 NPC 解決。
  - 獸人群落內部叛亂，玩家可介入或利用混亂。

## 角色/勢力聲望與關係系統
- 玩家與各大公、種族、女神、百姓有獨立聲望與好感度。
- 幫助某勢力提升好感，敵對則降低。
- 聲望高可獲特殊支援、資源、神選者青睞；聲望低可能被追殺、驅逐。

## 世界狀態隨玩家行動改變
- 忽視北境，腐化之地勢力擴大，甚至滅國。
- 與龍族、精靈、獸人聯盟，帝國強大，世界穩定。
- 選擇混亂、背叛，世界陷入戰亂，甚至進入「災厄紀元」結局。

## 多種結局與玩法
- 成為帝國之主，統一大陸。
- 成為災厄女神代言人，毀滅世界。
- 成為和平締造者，讓各族共存。
- 隱居山林，成為傳說中的隱士。
- 也可選擇只做小貴族、農奴，體驗平凡人生。

## 地圖與勢力
- 狮鹫帝國（中心），東：龍塔國，西：獸人群落，南：精靈森林，北：腐化之地。
- 每個方向有一位大公鎮守，下轄數百小貴族。

## 出生地邏輯
- 玩家可選出生地，但根據角色/身份有機率被分配到符合身份的地區。
- 例如貴族、領主多半出生在帝國，農奴在村落，神選者在特殊地點。
- 玩家會收到提示：「你原本想出生在X，但因為你的身份，實際出生在Y」。

## 極高自由度
- 玩家可扮演任何角色，做任何選擇，世界會根據行動動態變化。
- 沒有固定主線，只有無限可能。

## 世界觀與背景

- 世界由「狮鹫帝國」（中心）、「龍塔國」（東）、「獸人群落」（西）、「精靈森林」（南）、「腐化之地」（北）等勢力組成。
- 每個地區有獨特文化、種族與勢力，帝國由四大公和眾多小貴族統治。
- 玩家可扮演神選者、領主、貴族、農奴等多種身份，每個身份有不同出生地與命運。
- 世界會根據玩家選擇動態變化，可能爆發戰爭、聯盟、災厄等事件。
- 玩家與各勢力有獨立聲望，影響劇情發展與結局。

### 災厄女神與神選者體系
- 災厄女神為世界敵人，神選者需與領主契約才能進階。
- 神選者晉升需信仰之力，災厄神選者則靠毀滅城市晉升。
- 神選者皆為絕美女子，壽命悠久，與領主高度親密。

### 領主與主角設定
- 領主可契約神選者，等階與領地等級掛鉤。
- 主角「雨墨伯爵」可自選神選者技能與職業，契約無種族與數量限制。

## 遊戲系統與資料結構

### 角色模板（player.py）
- 內建多種角色模板（神選者、領主、貴族、農奴、吟遊詩人、學者、騎士、祭司、商人、盜賊、獵人、煉金術師、工匠、冒險者、流浪漢、魔法師、窮鬼等）。
- 每個角色有基礎 HP、等級、描述、六維能力（智慧、力量、敏捷、耐力、幸運、魔力）。
- 支援「弱角色挑戰」與「隨機角色」模式。

### 世界資料（story_ai.py）
- 地圖、勢力、角色出生地規則、聲望系統、劇情分支、動態事件、結局等皆以資料結構儲存。
- 支援多線分支劇情、動態事件生成、聲望與關係系統、世界狀態變化、多種結局。

## 主程式流程（main.py）

### 角色選擇
- 玩家輸入名稱，選擇「弱角色挑戰」或「隨機角色」。
- 弱角色僅開放部分角色，隨機角色可全角色隨機。
- 選定角色後顯示角色資訊，支援確認、返回、重新選擇。

### 專屬開場故事
- 每個角色有專屬開場故事，根據身份展開冒險序章，強化沉浸感。

### AI 劇情互動
- 遊戲進入互動劇情推進，每回合由 AI 生成一段描述與三個選項（option a/b/c），每個選項有對應結果。
- 玩家輸入 a/b/c 選擇行動，d 可隨時離開遊戲。
- AI 互動劇情會根據世界觀、角色身份自動生成，內容豐富多變。

## 擴充與自訂

- 你可隨時擴充角色模板、劇情分支、事件、結局等資料。
- 可將 AI 互動生成（Ollama llama3）與本地隨機事件混用，體驗不同風格。
- 所有世界觀、系統、角色、互動邏輯皆可根據需求調整。

---
